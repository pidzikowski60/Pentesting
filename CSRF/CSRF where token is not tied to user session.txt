This lab's email change functionality is vulnerable to CSRF. It uses tokens to try to prevent CSRF attacks, but they aren't integrated into the site's session handling system.

To solve the lab, use your exploit server to host an HTML page that uses a CSRF attack to change the viewer's email address.

You have two accounts on the application that you can use to help design your attack. The credentials are as follows:

wiener:peter
carlos:montoya

1.Wchodzimy na strone z zadaniem i uruchamiamy burpa, logujemy się danymi podanymi w zadaniu, włączamy intercepta i zmieniamy email, przechwycone połączenie wysyłany do repetera i wyłączany intercepta
2.Następnie w drugiej karcie logujemy się na carlosa i poprzez dev tools wyciągamy jego csrf token 
3. Musimy sami stworzyć w expoicie skrypt, gdyż nie mamy wersji profesjonalnej:
<form method="POST" action="https://0a5900df039f87d48203510a00610020.web-security-academy.net/my-account/change-email">
    <input type="hidden" name="email" value="testos@test.com">
    <input type="hidden" name="csrf"  value="t01S35wIYUcBFZnWkiHVfxUtE2bptvTT"
    <input type="submit" value="submit request" />
</form>
<script>
        document.forms[0].submit();
</script>
4.Wrzucamy dane, podmieniamy z csrf tokenem aktakującego, zapisujemy i dostarczamy ofierze

ENG:
1.Open Burp's browser and log in to your account. Submit the "Update email" form, and intercept the resulting request.
2.Make a note of the value of the CSRF token, then drop the request.
3.Open a private/incognito browser window, log in to your other account, and send the update email request into Burp Repeater.
4.Observe that if you swap the CSRF token with the value from the other account, then the request is accepted.
5.Create and host a proof of concept exploit as described in the solution to the CSRF vulnerability with no defenses lab. Note that the CSRF tokens are single-use, so you'll need to include a fresh one.
6.Change the email address in your exploit so that it doesn't match your own.
7.Store the exploit, then click "Deliver to victim" to solve the lab.